# secure-chat
Contributors: Hamim Seam and Angus Chen

### Usage
- Compilation: `make`
- Running: `./chat -l & sleep 1 && ./chat -c localhost`

### Procedure
1. Server and client generate public and private RSA keys before establishing a connection.
	- The keys are already stored in the repository's `keys` directory.
	- If the keys are not present, use `generate_rsa_keys` in `util.c` to create them.
2. Server and client generate a Diffie-Hellman key pair, using the functions in `dh.c`.
3. Server and client each sign their public Diffie-Hellman keys with their private RSA keys, and send both the DH public key and this signature over the channel.
4. Both parties verify the received signature using the other party's public RSA key, ensuring that it matches the Diffie-Hellman public key.
5. The Diffie-Hellman shared secret, generated by each party from their own secret keys and the received public keys is used as the key for HMAC.
6. Every message is encrypted with AES and then sent along with its corresponding HMAC. If the HMAC is verified to match the AES encrypted text, the text is decrypted and the message displayed to the recipient.

### Implemented Security Measures
- **Authentication of correspondents**: RSA signing using keys pre-exchanged securely.
- **Message secrecy (encryption)**: AES encryption/decryption with an ephemeral shared secret key via Diffie-Hellman.
- **Message integrity (MACs)**: Applied as HMAC(ENC(m)), and sent along with encoded message for verification.

### Notes
- All of the student-written functions are written in `util.c`, and called in `chat.c`.