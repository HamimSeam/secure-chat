# secure-chat
Contributors: Hamim Seam and Angus Chen

### Usage
- Compilation: `make`
- Running: `./chat -l & sleep 1 && ./chat -c localhost`

### Procedure
1. Server and client generate public and private RSA keys before establishing a connection.
	- The keys are already stored in the project's `keys` directory.
	- If the keys are not present, use `generate_rsa_keys` to create them.
2. Server and client generate a Diffie-Hellman key pair, using the functions in `dh.c`.
3. Server and client each sign their public Diffie-Hellman keys with their private RSA keys, and send this signature over the channel.
4. Both parties verify the received signature using the other party's public RSA key, ensuring that it matches the Diffie-Hellman public key, establishing authentication.
5. The Diffie-Hellman shared secret, generated by each party from their own secret keys and the received public keys is used as the key for HMAC.
6. Every message sent is sent along with its corresponding HMAC. If the HMAC is verified to match the message, integrity is established.

### Notes
- All of the student-written functions are written in `util.c`, and called in `chat.c`.
- There is a known bug where messages are sometimes doubled -- we speculate this is related to how much we read/write to the socket from our buffers.
